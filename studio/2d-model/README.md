# 2D-модель

Интерактивный режим имитационного моделирования — отличительная особенность TRIK Studio. В нем команды не передаются роботу, а исполняются для виртуальной модели, отображающейся на экране. Для платформ [ТРИК](../../trik/about/), [Lego EV3](../../ev3/about.md) и [Lego NXT](../../nxt/about.md) — это трехколесная тележка.

![Трехколесная тележка для конструктора ТРИК](https://thumb.tildacdn.com/tild3334-3831-4364-a537-626466373232/-/resize/60x/-/format/webp/trik-robot.png)

Изначально робот находится в бесконечном пустом пространстве, а у пользователя есть возможность расставлять препятствия в виде стен, рисовать цветные линии и области на полу.

![](../../.gitbook/assets/new-world.gif)

При этом эмулируется работа большинства реальных датчиков конструктора. Например, датчика касания, ультразвукового датчика расстояния, датчиков цвета и света для NXT, компас и гироскоп для EV3, инфракрасного и ультразвукового датчиков расстояния, датчика касания и датчика освещённости для ТРИК.

![](../../.gitbook/assets/sensors.gif)

Двумерная модель может иметь устройства, недоступные на реальном роботе. Например, возможность рисовать цветные линии маркером на полу. Внешний вид и набор устройств двумерной модели зависит от выбранной платформы.

Режим двумерной модели полезен для отладки программ и в случае отсутствия реального робота.

## Работа со сценой <a href="#work-with-scene" id="work-with-scene"></a>

| Комбинация клавиш | Описание действия               |
| ----------------- | ------------------------------- |
| Ctrl+Колесо мыши  | Увелечение / уменьшение сцены.  |
| Shift+Колесо мыши | Прокрутка сцены по горизонтали. |

Для переключения между режимами «Таскания сцены» и «Выделения» воспользуйтесь [контестным меню](./#kontekstnoe-menyu).

## Окно двумерной модели <a href="#window" id="window"></a>

Для открытия окна 2D-модели необходимо нажать кнопку <img src="https://static.tildacdn.com/tild3766-6331-4436-a263-623265663033/2d-model.svg" alt="" data-size="original"> на панели инструментов или в [настройках](../settings.md#robots) выбрать пункт «2D-модель».

![Режим двумерной модели для робота ТРИК](<../../.gitbook/assets/2d-model (1).png>)

Элементы окна 2D-модели:

* [Панель редактирования мира](./#editor-world)
* [Сетка](./#grid)
* [Линейка](./#ruler)
* [Кнопка возврата на старт](./#return-to-start)
* [Кнопка «Старт/стоп»](./#start-stop)
* [Панель управления скоростью](./#speed-control)
* [Настройки модели](./#panel-nastroiki-modeli)
  * [Эмулятор экрана и кнопок робота](./#emulyator-ekrana)
  * [Управление портами](./#ports)
  * [Управление моторами](./#panel-upravleniya-motorami)
  * [Управление физикой робота](./#upravlenie-fizikoi-robota)
  * [Параметры модели](./#parametry-modeli)
* [Всплывающее меню робота](./#fast-settings)

## **Редактирование модели мира** <a href="#editor-world" id="editor-world"></a>

Редактирование модели мира **** осуществляется с помощью соответствующей панели.

|                                                                                                                                                         | Название                             | Описание                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Горячая клавиша |
| ------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :-------------: |
| <img src="https://thumb.tildacdn.com/tild3763-3237-4833-a164-393534336437/-/resize/65x/-/format/webp/57ef89a9ee81c1577fb1.png" alt="" data-size="line"> | **Курсор**                           | Переключение в режим выбора.                                                                                                                                                                                                                                                                                                                                                                                                                             |        1        |
| <img src="https://thumb.tildacdn.com/tild3564-6138-4364-a232-326133336338/-/resize/65x/-/format/webp/2d_wall.png" alt="" data-size="line">              | **Стена**                            | <p>Добавление на сцену препятствия в виде стены.</p><p></p><p>При добавлении с нажатой клавишей <code>Shift</code> стена помещается либо под прямым углом, либо под углом в 45<strong>°</strong> относительно границ окна. Отображается стена в виде «кирпичной» линии.<br><br>При касании такой линии датчиком касания или при попадании в зону действия датчиком расстояния происходит срабатывание сенсора. Робот не может проехать сквозь стену.</p> |        2        |
| <img src="https://thumb.tildacdn.com/tild3834-6235-4536-a330-626336613166/-/resize/65x/-/format/webp/can.png" alt="" data-size="line">                  | **Банка**                            | Добавление на сцену препятствия в виде банки                                                                                                                                                                                                                                                                                                                                                                                                             |        3        |
| <p></p><p><img src="../../.gitbook/assets/ball (1).jpg" alt="" data-size="line"></p><p></p>                                                             | **Мяч**                              | Добавление на сцену препятствия в виде мяча. При касании тележки он отскакивает на некоторое расстояние.                                                                                                                                                                                                                                                                                                                                                 |        4        |
| <img src="https://thumb.tildacdn.com/tild6331-3031-4161-b430-623435333135/-/resize/65x/-/format/webp/2d_ruler.png" alt="" data-size="line">             | **Линия**                            | <p>Добавление на сцену прямой линии.</p><p></p><p>При добавлении линии с нажатой клавишей <code>Shift</code> линия помещается либо под прямым углом, либо под углом в 45<strong>°</strong> относительно границ окна.<br><br>На линию могут реагировать датчики света и цвета, расположенные на виртуальном роботе.</p><p></p><p>Можно <a href="./#editor-line">настраивать</a> цвет и толщину линии.</p>                                                 |        5        |
| <img src="https://static.tildacdn.com/tild6230-3232-4431-a636-383235306539/2d_bezier.svg" alt="" data-size="line">                                      | **Кривая Безье**                     | <p>Добавление на сцену линии с возможностью закругления.<br><br>На линию могут реагировать датчики света и цвета, расположенные на виртуальном роботе.<br><br>Можно <a href="./#editor-line">настраивать</a> цвет и толщину линии.</p>                                                                                                                                                                                                                   |        6        |
| <img src="https://static.tildacdn.com/tild6539-6166-4638-a465-643132613331/2d_rectangle.svg" alt="" data-size="line">                                   | **Прямоугольник**                    | <p>Добавление на сцену прямоугольника.<br><br>Можно <a href="./#editor-line">настраивать</a> цвет и толщину линий прямоугольника, а также цвет его заливки.</p>                                                                                                                                                                                                                                                                                          |        7        |
| <img src="https://thumb.tildacdn.com/tild3038-3963-4733-b130-656566616134/-/resize/65x/-/format/webp/2d_ellipse.png" alt="" data-size="line">           | **Эллипс**                           | <p>Добавление на сцену эллипса.<br><br>Можно <a href="./#editor-line">настраивать</a> цвет и толщину линий эллипса, а также цвет его заливки.</p>                                                                                                                                                                                                                                                                                                        |        8        |
| <img src="https://thumb.tildacdn.com/tild3363-6336-4332-b434-636563633334/-/resize/65x/-/format/webp/2d_pencil.png" alt="" data-size="line">            | **Стилус**                           | <p>Рисование линии мышью.<br></p><p>На нарисованную линию могут реагировать датчики света и цвета, расположенные на виртуальном роботе.</p><p></p><p>Можно <a href="./#editor-line">настраивать</a> цвет и толщину линий.</p>                                                                                                                                                                                                                            |        9        |
| <img src="../../.gitbook/assets/image.jpg" alt="" data-size="line">                                                                                     | ****[**Картинка**](./#add-image)**** | Добавление на сцену готового фона.                                                                                                                                                                                                                                                                                                                                                                                                                       |        0        |

### Редактор линий, стилуса и эллипса <a href="#editor-line" id="editor-line"></a>

При выделении линии, кривой Безье, стилуса, прямоугольника или эллипса появляется всплывающее окно, позволяющее настраивать их цвет и толщину.

У инструментов эллипс и прямоугольник есть возможность закрасить внутреннюю область заданным цветом. Также можно редактировать размеры, форму и положение выделенных геометрических объектов.

![](../../.gitbook/assets/line-settings.gif)

### Работа с фоном <a href="#add-image" id="add-image"></a>

Помимо инструментов рисования различных геометрических объектов,  поддержана возможность загрузки нескольких готовых изображений из файла.

При включенной сетке изображения автоматически выравниваются по ней при перетаскивании.

![](../../.gitbook/assets/upload-imgs.gif)

Если выделить изображение, его можно будет переместить, изменить размеры и настроить следующие параметры:&#x20;

| Свойство                                                                                    | Описание                                                                                                                                                                                                  |
| ------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <img src="../../.gitbook/assets/Сохранить без галки.png" alt="" data-size="original"> ****  | **Картинка не будет включена в файл сохранения**. При открытии текущего проекта на другом компьютере или переименовании файла с картинкой изображение в 2D-модели пропадёт.                               |
| <img src="../../.gitbook/assets/Сохранить с галкой.png" alt="" data-size="original">        | **Картинка будет запакована в проект.** Будьте внимательны, это значительно увеличит размер файла сохранения. Однако при открытии проекта на другом компьютере, изображение останется в двумерной модели. |
| <img src="../../.gitbook/assets/фон без галки.png" alt="" data-size="original">             | **Изображение будет на переднем плане.** Робот видит это изображение с помощью сенсоров.                                                                                                                  |
| <img src="../../.gitbook/assets/фон с галкой.png" alt="" data-size="original">              | **Изображение будет на заднем плане.** Робот не видит это изображение.                                                                                                                                    |
| <img src="../../.gitbook/assets/Заменить.png" alt="" data-size="original">                  | **Изменить картинку...** Заменить изображение на выбранное через диалоговое окно.                                                                                                                         |

## Панель настройки модели

Для открытия панели с настройками нажмите кнопку справа от [сцены](../interface/#editor-window-1):

![](../../.gitbook/assets/panel-settings-robot-open.gif)

На данной панели располагаются:

* [Эмулятор экрана](./#emulyator-ekrana)
* [Панель управления портами](./#ports)
* [Панель управления моторами](./#motors)
* [Параметры управления физикой робота](./#upravlenie-fizikoi-robota)
* [Параметры модели](./#parametry-modeli)

### Эмулятор экрана

![](../../.gitbook/assets/Контроллер.png)

Эмулятор экрана и кнопок робота отображает вывод программы на экран робота и позволяет эмулировать нажатие на его кнопки (кликом мыши по соответствующей кнопке на роботе).

### Панель управления портами <a href="#ports" id="ports"></a>

Панель управления портами позволяет менять конфигурацию и расположение сенсоров модели робота.

![](../../.gitbook/assets/Settings\_Sensors.jpg)\
\
Для каждого порта можно выбрать интересующий датчик, и он автоматически добавится на сцену.

При изменении конфигурации сенсоров из настроек сенсоры в двумерной модели автоматически подстраиваются. При этом будет считаться, что сенсор соединен с роботом. То есть при движении иконки робота сенсоры будут двигаться вместе с ним, даже если они находятся на некотором расстоянии от модели робота.

Рядом с ультразвуковым или инфракрасным датчиком отображается серый конус, обозначающий область, в которой этот датчик будет регистрировать препятствия.

#### Поворот и перемещение сенсоров

Для каждого порта можно выбрать интересующий датчик, и он автоматически добавится на сцену. Добавленные сенсоры всегда закреплены на роботе, их можно перемещать и вращать.

При вращении с нажатой клавишей `Shift` сенсор поворачивается либо под прямым углом, либо под углом в 45° относительно границ окна.

![](https://thumb.tildacdn.com/tild6161-6163-4135-a662-323663303030/-/resize/352x/-/format/webp/sensor-settings-in-2.png)

### Панель управления моторами

![](../../.gitbook/assets/Моторы\_.png)

Панель управления моторами позволяет задать, какой из портов моторов будет соответствовать левому и правому колесам.

### Управление физикой робота

![](../../.gitbook/assets/Физика.png)

* **Реалистичная физика** точнее эмулирует силы, действующие на робота: он поворачивает при столкновении со стеной, разгоняется с ускорением и т. д.
* **Реалистичные сенсоры** — включить / выключить эмуляцию неточной работы сенсоров.
* **Реалистичные моторы** — включить / выключить эмуляцию неточной работы моторов.

### Параметры модели

![](../../.gitbook/assets/Модель.png)

Отображение параметров модели робота:

* диаметра колеса,
* высоты робота,
* ширины робота,
* массы робота.

## Контекстное меню

Также функции двумерной модели доступны при нажатии на правую кнопку мыши на сцене.

![](<../../.gitbook/assets/Контекстное меню.png>)

| Пункт меню                        | Описание                                                                                                            |
| --------------------------------- | ------------------------------------------------------------------------------------------------------------------- |
| **Режим таскания сцены**          | Позволяет перемещать сцену с роботом, стенами и линиями при клике и перетаскивании на свободный участок сцены.      |
| **Режим выделения**               | Позволяет выделять группу стен, линий и других частей модели при клике и перетаскивании на свободный участок сцены. |
| **Сохранить модель мира...**      | Сохранение нарисованной сцены в виде XML-файла, который потом может быть загружен и использован в другом проекте.   |
| **Загрузить модель мира…**        | Загрузка ранее сохранённой модели мира.                                                                             |
| **Очистить всё**                  | Удаление всех стен и цветных линий. Робот при этом остаётся на сцене.                                               |
| **Очистить пол от следов робота** | Удаление всех цветных линий, нарисованных маркером робота. Остальные элементы остаются на сцене.                    |

## Сетка <a href="#grid" id="grid"></a>

Включение отображения на сцене сетки и привязка стен к её узлам. Слайдер позволяет настроить размер сетки.

![](../../.gitbook/assets/grid.gif)

## Панель управления скоростью <a href="#speed-control" id="speed-control"></a>

Панель управления скоростью позволяет задать скорость симуляции.

При выборе низкой скорости одной секунде модельного времени соответствует несколько секунд реального, при выборе высокой скорости — наоборот.

Здесь же отображается текущее модельное время, прошедшее с запуска программы. Оно может отличаться от реального времени (зависит от настроек скорости и возможностей компьютера).

## Линейка <a href="#ruler" id="ruler"></a>

Линейка показывает расстояния на сцене, в сантиметрах (относительно размера робота).

## Кнопка возврата на старт <a href="#return-to-start" id="return-to-start"></a>

Кнопка возврата на старт устанавливает робота в исходное положение, задаваемое красным крестиком на сцене.

Крестик можно вращать вокруг своей оси, выделив его и таская конец появившейся стрелки. Так задаётся начальное направление робота.

При добавлении с нажатой клавишей «Shift» стрелка крестика помещается либо под прямым углом, либо под углом в 45**°** относительно границ окна.

![](../../.gitbook/assets/return-to-start.gif)

## Кнопка «Старт / стоп» <a href="#start-stop" id="start-stop"></a>

&#x20;<img src="../../.gitbook/assets/2d_run (1).png" alt="" data-size="original"> Запуск программы.

<img src="../../.gitbook/assets/2d_stop.png" alt="" data-size="original"> Остановка программы.

## Всплывающее меню робота <a href="#fast-settings" id="fast-settings"></a>

![](../../.gitbook/assets/2D-10.png)

Всплывающее меню управления роботом появляется при его выделении.

| Элемент                     | Описание                                                                                                                       |
| --------------------------- | ------------------------------------------------------------------------------------------------------------------------------ |
| **Следование за роботом**   | При включённом режиме сцена автоматически перемещается, выставляя робот в центр, если он выезжает за границы видимого участка. |
| **Возврат робота**          | Возврат робота на исходную позицию, обозначаемую красным крестиком.                                                            |
| **Изменение толщины следа** | Изменение толщины следа, оставляемого роботом при рисовании маркером.                                                          |
