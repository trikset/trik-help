# Блоки LEGO EV3

Специализированные блоки для LEGO EV3 делятся на несколько категорий:

1. [Действия](blocks.md#bloki-deistviya) — блоки, выполняющие какое-либо действие на роботе: включение моторов, проигрывание звука и т.д.
2. [Ожидания](blocks.md#bloki-ozhidaniya) — блоки, ждущие наступления какого-либо события: определённых показаний датчиков, нажатия на кнопку и т.д.
3. [Рисования на дисплее](blocks.md#risovanie-na-displee) — блоки, используемые для вывода графики и текста на экран.
4. [Line Leader](blocks.md#line-leader) — блоки для продвинутого датчика «Line Leader».

&#x20;Блоки, доступные для всех платформ см. в статье «[Общие блоки](../studio/programming-visual/blocks.md)».

## Блоки действия

| Вид                                                                                          | Название                                                                | Описание                                                                                                                                                                                                                         |
| -------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| <img src="../.gitbook/assets/sendMessageThreadsBlock.png" alt="" data-size="original">       | [Отправить сообщение в задачу](blocks.md#otpravit-soobshenie-v-zadachu) | Отправляет данное сообщение в параллельную задачу с заданным идентификатором (идентификатор должен быть указан при создании задачи в блоке «[Параллельные задачи](../studio/programming-visual/blocks.md#parallelnye-zadachi)»). |
| <img src="../.gitbook/assets/beepBlock.png" alt="" data-size="original">                     | [Гудок](blocks.md#gudok)                                                | Проиграть на роботе звук с фиксированной частотой.                                                                                                                                                                               |
| <img src="../.gitbook/assets/playToneBlock.png" alt="" data-size="original">                 | [Играть звук](blocks.md#igrat-zvuk)                                     | Проиграть на роботе звук с заданной частотой и длительностью.                                                                                                                                                                    |
| <img src="../.gitbook/assets/enginesForwardBlock.png" alt="" data-size="original">           | [Моторы вперед](blocks.md#motory-vpered)                                | Включить моторы по заданным портам с заданной мощностью.                                                                                                                                                                         |
| <img src="../.gitbook/assets/enginesBackwardBlock.png" alt="" data-size="original">          | [Моторы назад](blocks.md#motory-nazad)                                  | Включить моторы в режиме реверса по заданным портам с заданной мощностью.                                                                                                                                                        |
| <img src="../.gitbook/assets/enginesStopBlock.png" alt="" data-size="original">              | [Моторы стоп](blocks.md#motory-stop)                                    | Выключить моторы по заданным портам.                                                                                                                                                                                             |
| <img src="../.gitbook/assets/nullificationEncoderBlock.png" alt="" data-size="original">     | [Сбросить показания энкодера](blocks.md#sbrosit-pokazaniya-enkodera)    | Сбросить показания количества оборотов моторов.                                                                                                                                                                                  |
| <img src="../.gitbook/assets/ledBlock.png" alt="" data-size="original">                      | [Светодиод](blocks.md#svetodiod)                                        | Установить цвет светодиода на передней панели робота.                                                                                                                                                                            |
| <img src="../.gitbook/assets/sendMessageBlock.png" alt="" data-size="original">              | [Отправить письмо роботу](blocks.md#otpravit-pismo-robotu)              | Отправить письмо другому роботу.                                                                                                                                                                                                 |
| <img src="../.gitbook/assets/calibrateGyroscopeBlock.png" alt="" data-size="original">       | [Калибровка гироскопа](blocks.md#kalibrovka-giroskopa)                  | Устанавливает гироскоп в 0 в текущей позиции.                                                                                                                                                                                    |
| <img src="../.gitbook/assets/startCompassCalibrationBlock.png" alt="" data-size="original">  | [Начать калибровку компаса](blocks.md#nachat-kalibrovku-kompasa)        | Начинает калибровку компаса программно.                                                                                                                                                                                          |
| <img src="../.gitbook/assets/stopCompassCalibrationBlock.png" alt="" data-size="original">   | [Закончить калибровку компаса](blocks.md#zakonchit-kalibrovku-kompasa)  | Заканчивает калибровку компаса.                                                                                                                                                                                                  |
| <img src="../.gitbook/assets/readRGBBlock.png" alt="" data-size="original">                  | [Считать цвета в переменные](blocks.md#schitat-cveta-v-peremennye)      | Читать RGB в переменной.                                                                                                                                                                                                         |

### Отправить сообщение в задачу

![Отправить сообщение в задачу](<../.gitbook/assets/sendMessageThreadsBlock (1).png>)

Отправляет данное сообщение в параллельную задачу с заданным идентификатором (идентификатор должен быть указан при создании задачи в блоке «[Параллельные задачи](../studio/programming-visual/blocks.md#parallelnye-zadachi)»).

В качестве сообщения может быть любое выражение.

### Гудок

![Гудок](<../.gitbook/assets/beepBlock (1).png>)

Проиграть на роботе звук с фиксированной частотой.

Параметры:

1. &#x20;Ждать ли завершения проигрывания звука или сразу же перейти к следующему блоку. Допустимые значения — «истина», «ложь».
2. &#x20;Громкость воспроизведения.

### Играть звук

![Играть звук](<../.gitbook/assets/playToneBlock (1).png>)

Проиграть на роботе звук с заданной частотой и длительностью. Аналогичен блоку «[Гудок](blocks.md#gudok)», но позволяет также задавать параметры звука.

Параметры:

* &#x20;Частота (Гц).
* &#x20;Длительность (мс).
* &#x20;Ждать ли завершения проигрывания звука или сразу же перейти к следующему блоку. Допустимые значения — истина, ложь.
* &#x20;Громкость воспроизведения (от 0 до 100%).

### **Моторы вперед**

![Моторы вперед](<../.gitbook/assets/enginesForwardBlock (1).png>)

Включить моторы по заданным портам с заданной мощностью. Порты задаются буквами A, B или C, разделенными запятыми.

Мощность задается в процентах числом от -100 до 100, если задано отрицательное значение, мотор включается в режиме реверса.

Моторы имеют разные режимы работы: режим торможения и режим скольжения (отображаемые красным или зелёным прямоугольником на блоке соответственно). Режимы влияют на то, как двигатель отрабатывает команду — режим торможения стопорит двигатель при отключении, режим скольжения позволяет двигателю прокручиваться по инерции.

### **Моторы назад**

![Моторы назад](<../.gitbook/assets/enginesBackwardBlock (1).png>)

Включить моторы в режиме реверса по заданным портам с заданной мощностью. Параметры аналогичны параметрам блока «[Моторы вперёд](blocks.md#motory-vpered)».

### **Моторы стоп**

![Моторы стоп](<../.gitbook/assets/enginesStopBlock (1).png>)

Выключить моторы по заданным портам.

### **Сбросить показания энкодера**

![Сбросить показания энкодера](<../.gitbook/assets/nullificationEncoderBlock (1).png>)

Сбросить показания количества оборотов моторов.

### **Светодиод**

![Светодиод](<../.gitbook/assets/ledBlock (1).png>)

Установить цвет светодиода на передней панели робота.

### **Отправить письмо роботу**

![Отправить письмо роботу](<../.gitbook/assets/sendMessageBlock (1).png>)

Отправить письмо другому роботу. Если имя получателя не заполнено, сообщение будет отослано всем соединенным роботам.

### Калибровка гироскопа

![Калибровка гироскопа](<../.gitbook/assets/calibrateGyroscopeBlock (1).png>)

Устанавливает гироскоп в 0 в текущей позиции.

### Начать калибровку компаса

![Начать калибровку компаса](<../.gitbook/assets/startCompassCalibrationBlock (1).png>)

Начинает калибровку компаса программно.\
\
Чтобы откалибровать компас, робот должен повернуться на месте больше чем на 540° в одну, а затем в обратную сторону. После поворотов необходимо добавить блок «[Закончить калибровку компаса](blocks.md#zakonchit-kalibrovku-kompasa)».

### Закончить калибровку компаса

![Закончить калибровку компаса](<../.gitbook/assets/stopCompassCalibrationBlock (1).png>)

Заканчивает калибровку компаса. Результат калибровки возвращается в переменной. Ненулевой результат означает успешную калибровку.

### Считать цвета в переменные

![Считать цвета в переменные](<../.gitbook/assets/readRGBBlock (1).png>)

Читать RGB в переменной.

## Блоки ожидания

| Вид                                                                                        | Название                                                                               | Описание                                                                                                                                  |
| ------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| <img src="../.gitbook/assets/receiveMessageThreadsBlock.png" alt="" data-size="original">  | [Получить сообщение из другой задачи](blocks.md#poluchit-soobshenie-iz-drugoi-zadachi) | Ждать получения сообщения из другой параллельной задачи.                                                                                  |
| <img src="../.gitbook/assets/waitForTouchSensorBlock.png" alt="" data-size="original">     | [Ждать датчик касания](blocks.md#zhdat-datchik-kasaniya)                               | Ждать, пока не сработает датчик касания.                                                                                                  |
| <img src="../.gitbook/assets/waitForEncoderBlock.png" alt="" data-size="original">         | [Ждать энкодер](blocks.md#zhdat-enkoder)                                               | Ждать, пока показания счетчика количества оборотов на заданном моторе не достигнут указанного в значении параметра «Предел оборотов».     |
| <img src="../.gitbook/assets/waitForColorBlock.png" alt="" data-size="original">           | [Ждать цвет](blocks.md#zhdat-cvet)                                                     | Ждать, пока сенсор цвета в режиме распознавания цветов не вернет указанный цвет.                                                          |
| <img src="../.gitbook/assets/waitForColorIntensityBlock.png" alt="" data-size="original">  | [Ждать интенсивность цвета](blocks.md#zhdat-intensivnost-cveta)                        | Ждать, пока значение, возвращаемое сенсором цвета на указанном порту, не будет сравнимо с указанным в значении параметра «Интенсивность». |
| <img src="../.gitbook/assets/waitForLightBlock.png" alt="" data-size="original">           | [Ждать свет](blocks.md#zhdat-svet)                                                     | Ждать, пока значение, возвращаемое сенсором света на указанном порту, не будет сравнимо с указанным в значении параметра «Проценты».      |
| <img src="../.gitbook/assets/waitForSonarDistanceBlock.png" alt="" data-size="original">   | [Ждать датчик расстояния](blocks.md#zhdat-datchik-rasstoyaniya)                        | Ждать, пока расстояние, возвращаемое ультразвуковым сенсором расстояния, не будет сравнимо с указанным в значении параметра «Расстояние». |
| <img src="../.gitbook/assets/waitForButtonsBlock.png" alt="" data-size="original">         | [Ждать нажатия кнопки](blocks.md#zhdat-nazhatiya-knopki)                               | Ждать нажатия на кнопку на корпусе робота.                                                                                                |
| <img src="../.gitbook/assets/waitForSoundSensorBlock.png" alt="" data-size="original">     | [Ждать датчик звука](blocks.md#zhdat-datchik-zvuka)                                    | Ждать, пока громкость, считанная микрофоном на заданном порту, не будет выше или ниже заданного значения.                                 |
| <img src="../.gitbook/assets/waitForGyroscopeBlock.png" alt="" data-size="original">       | [Ждать гиродатчик](blocks.md#zhdat-girodatchik)                                        | Ждать, пока значение, возвращаемое гироскопом на указанном порту, не будет сравнимо с указанным в значении параметра «Значение».          |
| <img src="../.gitbook/assets/waitForMessageBlock.png" alt="" data-size="original">         | [Ждать приема сообщения](blocks.md#zhdat-priema-soobsheniya)                           | Сохраняет сообщение от другого робота в заданную переменную.                                                                              |

### Получить сообщение из другой задачи

![Получить сообщение из другой задачи](<../.gitbook/assets/receiveMessageThreadsBlock (1).png>)

Ждать получения сообщения из другой параллельной задачи.

Когда сообщение будет получено, оно будет присвоено указанной в блоке переменной.

Свойство «Дождаться сообщения» позволяет указать, что делать, если очередь сообщений пуста: дождаться прихода нового сообщения или продолжить работу, присвоив переменной пустую строку.

Сообщение автоматически приводится к типу, соответствующему типу переменной-приёмника. Пример: если вы посылаете число в виде строки, то оно будет принято как число.

### Ждать датчик касания

![Ждать датчик касания](<../.gitbook/assets/waitForTouchSensorBlock (1).png>)

Ждать, пока не сработает датчик касания.

Параметром указывается номер порта, к которому подключен датчик. Допустимые значения: 1, 2, 3, 4.

### Ждать энкодер

![Ждать энкодер](<../.gitbook/assets/waitForEncoderBlock (1).png>)

Ждать, пока показания счетчика количества оборотов на заданном моторе не достигнут указанного в значении параметра «Предел оборотов».

Параметры:

1. &#x20;Порт — название порта, к которому подключен мотор (A, B или C).
2. Считанное значение — операция, которая будет использоваться для сравнения с введенным пределом оборотов.
3. &#x20;Предел оборотов.

### Ждать цвет

![Ждать цвет](<../.gitbook/assets/waitForColorBlock (1).png>)

Ждать, пока сенсор цвета в режиме распознавания цветов не вернет указанный цвет.

Параметры:

1. Цвет.
2. Порт — номер порта, к которому подключен датчик цвета.

### Ждать интенсивность цвета

![Ждать интенсивность цвета](<../.gitbook/assets/waitForColorIntensityBlock (1).png>)

Ждать, пока значение, возвращаемое сенсором цвета на указанном порту, не будет сравнимо с указанным в значении параметра «Интенсивность».

Параметры:

1. Интенсивность (от 0 до 100%).&#x20;
2. Порт — номер порта, к которому подключен сенсор цвета.
3. &#x20;Считанное значение — операция, которая будет использоваться для сравнения с введенной интенсивностью.

### Ждать свет

![Ждать свет](<../.gitbook/assets/waitForLightBlock (1).png>)

Ждать, пока значение, возвращаемое сенсором света на указанном порту, не будет сравнимо с указанным в значении параметра «Проценты».

Параметры:

1. &#x20;Проценты (от 0 до 100%).
2. Порт — номер порта, к которому подключен сенсор цвета.
3. Считанное значение — операция, которая будет использоваться для сравнения со значением параметра «Проценты».

### Ждать датчик расстояния

![Ждать датчик расстояния](<../.gitbook/assets/waitForSonarDistanceBlock (1).png>)

Ждать, пока расстояние, возвращаемое ультразвуковым сенсором расстояния, не будет сравнимо с указанным в значении параметра «Расстояние».

Параметры:

1. Расстояние (в сантиметрах, от 0 до 255).
2. &#x20;Порт — номер порта, к которому подключен датчик расстояния.
3. &#x20;Считанное значение — операция, которая будет использоваться для сравнения с введенным расстоянием.

### Ждать нажатия кнопки

![Ждать нажатия кнопки](<../.gitbook/assets/waitForButtonsBlock (1).png>)

Ждать нажатия на кнопку на корпусе робота.

### Ждать датчик звука

![Ждать датчик звука](<../.gitbook/assets/waitForSoundSensorBlock (1).png>)

Ждать, пока громкость, считанная микрофоном на заданном порту, не будет выше или ниже заданного значения.

### Ждать гиродатчик

![Ждать гиродатчик](<../.gitbook/assets/waitForGyroscopeBlock (1).png>)

Ждать, пока значение, возвращаемое гироскопом на указанном порту, не будет сравнимо с указанным в значении параметра «Значение».

### Ждать приема сообщения

![Ждать приема сообщения](<../.gitbook/assets/waitForMessageBlock (1).png>)

Сохраняет сообщение от другого робота в заданную переменную. Если сообщения нет, то робот ждет приход сообщения, если установлен флаг. Иначе в переменную установится значение по умолчанию.

## Рисование на дисплее

| Вид                                                                              | Название                                                                                 | Описание                                                          |
| -------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------- | ----------------------------------------------------------------- |
| <img src="../.gitbook/assets/printTextBlock.png" alt="" data-size="original">    | [Напечатать текст](blocks.md#napechatat-tekst)                                           | Печатает заданную строку в заданном месте на экране робота.       |
| <img src="../.gitbook/assets/clearScreenBlock.png" alt="" data-size="original">  | [Очистить экран](blocks.md#ochistit-ekran)                                               | Стереть всё, что нарисовано на экране.                            |
| <img src="../.gitbook/assets/drawRectBlock.png" alt="" data-size="original">     | [Нарисовать прямоугольник](../trik/programming-visual/blocks.md#narisovat-pryamougolnik) | Нарисовать на экране прямоугольник.                               |
| <img src="../.gitbook/assets/drawPixelBlock.png" alt="" data-size="original">    | [Нарисовать точку](blocks.md#narisovat-tochku)                                           | Нарисовать на экране точку в указанных координатах.               |
| <img src="../.gitbook/assets/drawLineBlock.png" alt="" data-size="original">     | [Нарисовать линию](blocks.md#narisovat-liniyu)                                           | Нарисовать на экране отрезок.                                     |
| <img src="../.gitbook/assets/drawCircleBlock.png" alt="" data-size="original">   | [Нарисовать круг](blocks.md#narisovat-krug)                                              | Нарисовать на экране круг с заданным центром и заданным радиусом. |

### Напечатать текст

![Напечатать текст](<../.gitbook/assets/printTextBlock (1).png>)

Печатает заданную строку в заданном месте на экране робота.

Значение свойства «Текст» по умолчанию трактуется как строка в чистом виде, оно так и будет выведено на экран. Чтобы система считала, что это выражение на текстовом языке (это может быть полезно, например, при отладке значения переменных), поставьте галочку «Вычислять» в редакторе свойств.

### Очистить экран

![Очистить экран](<../.gitbook/assets/clearScreenBlock (1).png>)

Стереть всё, что нарисовано на экране.

### Нарисовать прямоугольник

![Нарисовать прямоугольник](<../.gitbook/assets/drawRectBlock (1).png>)

Нарисовать на экране прямоугольник.

Параметры:

1. &#x20;X, Y — координаты левого верхнего угла.
2. &#x20;Ширина прямоугольника.
3. &#x20;Высота прямоугольника.
4. &#x20;Обновить картинку (истина или ложь).

### Нарисовать точку

![Нарисовать точку](<../.gitbook/assets/drawPixelBlock (1).png>)

Нарисовать на экране точку в указанных координатах.

### Нарисовать линию

![Нарисовать линию](<../.gitbook/assets/drawLineBlock (1).png>)

Нарисовать на экране отрезок.

Параметры:

1. &#x20;X1, Y1 — координаты начала отрезка.
2. &#x20;X2, Y2 — координаты конца отрезка.
3. &#x20;Обновить картинку (истина или ложь).

### Нарисовать круг

![Нарисовать круг](<../.gitbook/assets/drawCircleBlock (1).png>)

Нарисовать на экране круг с заданным центром и заданным радиусом.

Параметры:

1. &#x20;X, Y — координаты центра круга.
2. &#x20;Радиус круга.
3. &#x20;Обновить картинку (истина или ложь).

## Line Leader

| Вид                                                                                    | Название                                                                                      | Описание                                          |
| -------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------- | ------------------------------------------------- |
| <img src="../.gitbook/assets/calWhiteLineLeader.png" alt="" data-size="original">      | [Калибровка белого](blocks.md#kalibrovka-belogo)                                              | Калибрует порог белого для сенсора.               |
| <img src="../.gitbook/assets/calBlackLineLeader.png" alt="" data-size="original">      | [Калибровка черного](blocks.md#kalibrovka-chernogo)                                           | Калибрует порог черного для сенсора.              |
| <img src="../.gitbook/assets/calPIDLineLeader.png" alt="" data-size="original">        | [Калибровка ПИД-регулятора](blocks.md#kalibrovka-pid-regulyatora)                             | Устанавливает уставку сенсора                     |
| <img src="../.gitbook/assets/sleepLineLeader.png" alt="" data-size="original">         | [Датчик линии в спящий режим](blocks.md#datchik-linii-v-spyashii-rezhim)                      | Отправляет датчик линии в режим энергосбережения. |
| <img src="../.gitbook/assets/wakeUpLineLeader.png" alt="" data-size="original">        | [Пробудить датчик линии](blocks.md#probudit-datchik-linii)                                    | Включает датчик линии для работы.                 |
| <img src="../.gitbook/assets/readAvrLineLeader.png" alt="" data-size="original">       | [Средневзвешенное значение в переменную](blocks.md#srednevzveshennoe-znachenie-v-peremennuyu) | Считывает средневзвешенное значение в переменную. |
| <img src="../.gitbook/assets/readCalLineLeader.png" alt="" data-size="original">       | [Считать сенсор в массив](blocks.md#schitat-sensor-v-massiv)                                  | Считать значения с сенсора (восемь значений).     |
| <img src="../.gitbook/assets/readSteeringLineLeader.png" alt="" data-size="original">  | [Управляющее значение в переменную](blocks.md#upravlyayushee-znachenie-v-peremennuyu)         | Считывает управляющее значение в переменную.      |

### Калибровка белого

![Калибровка белого](<../.gitbook/assets/calWhiteLineLeader (1).png>)

Калибрует порог белого для сенсора. Должен находиться на белом.

### Калибровка черного

![Калибровка черного](<../.gitbook/assets/calBlackLineLeader (1).png>)

Калибрует порог черного для сенсора. Должен находиться на черном.

### Калибровка ПИД — регулятора

![Калибровка ПИД-регулятора](<../.gitbook/assets/calPIDLineLeader (1).png>)

Устанавливает уставку сенсора (середина сенсора над линией), П/(П фактор), И/(И фактор), Д/(Д фактор).

### Датчик линии в спящий режим

![Датчик линии в спящий режим](<../.gitbook/assets/sleepLineLeader (1).png>)

Отправляет датчик линии в режим энергосбережения.

### Пробудить датчик линии

![Пробудить датчик линии](<../.gitbook/assets/wakeUpLineLeader (1).png>)

Включает датчик линии для работы.

### Средневзвешенное значение в переменную

![Средневзвешенное значение в переменную](<../.gitbook/assets/readAvrLineLeader (1).png>)

Считывает средневзвешенное значение в переменную.

Значение высчитывается внутри сенсора, где каждый из восьми сенсоров берется с коэффициентом, и вычисляется среднее.

Ожидается значение от 0 до 80 (-1 — ошибка).

### Считать сенсор в массив

![Считать сенсор в массив](<../.gitbook/assets/readCalLineLeader (1).png>)

Считать значения с сенсора (восемь значений). Значения от 0 до 100. 0 — черный, 100 — белый.

### Управляющее значение в переменную

![Управляющее значение в переменную](<../.gitbook/assets/readSteeringLineLeader (1).png>)

Считывает управляющее значение в переменную. Значение высчитывается внутри сенсора и может быть использовано сразу для моторов.

Ожидается значение от -100 до 100 (-101 — ошибка)
